var EggGame=function(){var e,t,n,a,r,i=document.getElementById("canvas"),o=ndgmr.checkPixelCollision,s=3,c=0,d=10,l=150,u=[],m=1e3;window.alphaThresh=.6;var g=function(){manifest=[{id:"egg",src:"assets/images/egg.png"},{id:"basket",src:"assets/images/basket.png"},{id:"cloud",src:"assets/images/cloud.png"}],preload=new createjs.LoadQueue,preload.addEventListener("complete",f),preload.addEventListener("progress",h),preload.loadManifest(manifest)},h=function(e){var t=e?100*preload.progress|0:0;console.log("Loading: "+t+"%")},f=function(){v()},v=function(){i.onselectstart=function(){return!1},p()},p=function(){e=new createjs.Stage(i),createjs.Touch.enable(e),e.mouseMoveOutside=!0,e.enableMouseOver(10),t=i.width,n=i.height,"number"!=typeof interval&&(interval=setInterval(function(){k()},m)),I(),y(),createjs.Ticker.useRAF=!0,createjs.Ticker.setFPS(60),createjs.Ticker.hasEventListener("tick")||createjs.Ticker.addEventListener("tick",L)},k=function(){var t=preload.getItem("egg").src,n=new createjs.Shape;n.graphics.beginFill("#ff00cc").drawCircle(0,0,70),a=new createjs.Bitmap(t),a.x=Math.floor(631*Math.random())+70,a.y=0,a.hitArea=n,u.push(a),e.addChild(a),e.setChildIndex(a,0)},y=function(){var a=preload.getItem("basket").src;basketItem=new createjs.Bitmap(a),basketItem.x=t/2-64,basketItem.y=n-128,e.addChild(basketItem)},I=function(){var t=preload.getItem("cloud").src,n=new createjs.Container;r=new createjs.Bitmap(t);var a=r.clone(),i=r.clone(),o=r.clone(),s=r.clone();r.y=i.y=s.y=0,r.x=0,a.y=o.y=-40,a.x=170,i.x=350,o.x=520,s.x=650,n.addChild(r,a,i,o,s),e.addChild(n),n.setChildIndex(a,0)},b=function(){c>0?c-=d:c=0,document.getElementById("upscore").innerHTML=c},C=function(){c+=d,document.getElementById("upscore").innerHTML=c},w=function(t,n){var a=o(basketItem,t,window.alphaThresh);a&&(e.removeChild(t),u.splice(n,1),C())},j=function(){return s-=1,3==s||2==s||1==s?document.getElementById("ulife").innerHTML=s:0==s&&(document.getElementById("ulife").innerHTML=s,E()),!1},E=function(){clearInterval(interval),interval="";for(var t=0;t<u.length;t++)e.removeChild(u[t]);u=[],e.removeChild(basketItem),document.getElementById("overmsg").style.display="block",setTimeout(function(){createjs.Ticker.removeEventListener("tick",L)},100),e.update()},L=function(t){for(var a,r,i,o=0,s=t;o<u.length;o++)a=s.delta,u[o].y+=a/1e3*(15*Math.random()+l),u[o].y>n-100&&(e.removeChild(u[o]),u.splice(o,1),b(),j()),u.length>0&&(r=u[o],i=o,w(r,i));document.onkeydown=function(e){39==e.keyCode?basketItem.x+=a/1e3*400:37==e.keyCode&&(basketItem.x-=a/1e3*400)},e.update(t)};return{initLoad:function(){g()}}}();EggGame.initLoad();